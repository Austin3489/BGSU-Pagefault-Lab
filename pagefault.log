Script started on Mon Nov 22 17:47:41 2021
]0;acarico@bglinux1:~/cs3080/vmem[?1034h~/cs3080/vmem$ pwd
/home/73/acarico/cs3080/vmem
]0;acarico@bglinux1:~/cs3080/vmem~/cs3080/vmem$ ls -o
total 28
-rwxr-xr-x. 1 acarico 13688 Nov 22 17:46 [0m[01;32mpagefault[0m
-rw-r--r--. 1 acarico  4804 Nov 22 17:46 pagefault.cpp
-rw-------. 1 acarico     0 Nov 20 03:45 pagefault.cpp.save
-rw-r--r--. 1 acarico     1 Nov 20 03:45 pagefault.cpp.save.1
-rw-r--r--. 1 acarico     0 Nov 22 17:47 pagefault.log
]0;acarico@bglinux1:~/cs3080/vmem~/cs3080/vmem$ ct at pagefault.cpp
//This is the code for Lab 5 in CS3080
//Author: Austin Carico
//November 22nd, 2021
//This program finds the minimum number of page faults between LRU and FIFO algorithms


#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <iostream>

 
#define NUM_REF 42 // Number of references
#define FRAME_START 3
#define FRAME_END   7

//Setting global variables
int FIFOMin  = 1000;
int LRUMin = 1000;
int frameMinFIFO = 1000;
int frameMinLRU = 1000;
int ref[NUM_REF] = {1, 2, 7, 4, 5, 2, 7, 2, 3, 2, 1, 7, 6, 3, 7, 6, 3, 
4, 3, 4, 3, 4, 7, 2, 1, 7, 6, 
7, 8, 7, 8, 9, 7, 8, 2, 7, 8, 
3, 5, 3, 5, 7 };


int ram_frames[FRAME_END];

void FIFO_Sim();    //FIFO Function Protocol
void LRU_Sim();
void Print_Results(); // Print the results with this function


using namespace std;

int main()
{	
	//Declare Local Variable
	
	cout << endl;
	cout << "\n\n*** Virtual Memory Sim Program ***" << endl;
	
	FIFO_Sim(); 
	LRU_Sim(); 
	Print_Results(); 


	cout << "\n End of Simulation" << endl;
	return 0;
	

}
void FIFO_Sim()
{
	int i, j, framecount;
	int page_fault;
	
	int found = 0; // Declare variable to find the reference
	
	
          cout << " \nFIFO Results " <<endl;
 
	for(framecount = 3; framecount <= 7; framecount++){ // Run the function for each frame
		page_fault = 0;
	for(j = 0; j < framecount; j++) // Set the references in the ram frame to -1
      {
            ram_frames[j] = -1;
      }
	for(j = 0; j < NUM_REF; j++){ //  iterate through references
		found = 0;
	
		for(i = 0; i < framecount; i++){ // Go through frames
			
		
		
			if(ref[j] == ram_frames[i]){ //Check if reference is there
			page_fault--;
			found++;
			}
		}	
	
		page_fault++;
	
	    if((page_fault <= framecount) && framecount == 0) // Check the initally empty ram_frames array 
            {
                  ram_frames[i] = ref[i];
			
            } 
            else if(found == 0) // If the reference is not there
            {
            ram_frames[(page_fault - 1) % framecount] = ref[j]; // Place the reference where the first reference that went in was
		
            }
			
		
        }
	if(page_fault < FIFOMin){ // Set minimum page faults for this algorithm
		        frameMinFIFO = framecount;
				FIFOMin = page_fault;
			}
	cout<< "Frame Number " << framecount << ": " << page_fault << " Page Faults" << endl;
      }
}
void LRU_Sim(){
	     int lastUsed[NUM_REF];
	     int i,  lruFrameCount;
	     int page_fault = 0;
             int found;
	    cout << "LRU Results: " << endl;
            for(lruFrameCount = 3; lruFrameCount <= 7; lruFrameCount++)
	    {
				page_fault = 0;
           	 for(i=0;i< lruFrameCount;i++)
           	 {
            	ram_frames[i]=-1;
            	lastUsed[i] = 0; // Find when the page was last used
           	 }
            i=0;
            while(i< NUM_REF)
            {
                int j=0;
		found=0;
                while(j< lruFrameCount)
                {
                	if(ref[i]==ram_frames[j]){ // Check whether the page already exist in frames or not
                		found++;
                		lastUsed[j]=i+1; // Incremenet when it was last used as a priority for searching
                }
                	j++;
                }   
                j=0;   // reset frame counter
     
                if(found==0) // if it's not found in the frames
                { 
                int min=0,x=0; 
                while(x < lruFrameCount-1) 
                { 
                    if(lastUsed[min]>lastUsed[x+1]) // Find the LRU page
                    	min=x+1;
                    x++;
					
                    }
                ram_frames[min]=ref[i];// Set the minimum value, starting with 0 equal to the current index of the reference to add to frames
                lastUsed[min]=i+1;  //Increase the minimum value of the LRU index since a reference was just put into the array
                page_fault++;           //Increment the page fault
                }
            i++; 
            }
			if(page_fault < LRUMin){ //	
				LRUMin = page_fault;
				frameMinLRU = lruFrameCount;
				
			}
	    cout << "Frame Number " << lruFrameCount << ": " << page_fault << " Page Faults" << endl;
				
				
			
			}
}

void Print_Results(){ // Output which algorithm has the least page faults in a frame, or if they are equal
if(frameMinLRU < frameMinFIFO){ 
	cout << "Minimum Page Fault: Algorithm [LRU] with " << LRUMin << " and Frame Number " << frameMinLRU << endl;
}
else if(frameMinFIFO < frameMinLRU){
	cout << "Minimum Page Fault: Algorithm [FIFO] with " << FIFOMin << " and Frame Number " << frameMinFIFO << endl;
}
	else if(frameMinFIFO == frameMinLRU){
		cout << "Both Algorithms have same minimum page fault with " << FIFOMin << " Page Faults" << " at Frame " << frameMinFIFO << endl;
	}
}
]0;acarico@bglinux1:~/cs3080/vmem~/cs3080/vmem$ g++ pagefault.cpp -o pagefault
]0;acarico@bglinux1:~/cs3080/vmem~/cs3080/vmem$ ./pagefault



*** Virtual Memory Sim Program ***
 
FIFO Results 
Frame Number 3: 25 Page Faults
Frame Number 4: 22 Page Faults
Frame Number 5: 16 Page Faults
Frame Number 6: 14 Page Faults
Frame Number 7: 11 Page Faults
LRU Results: 
Frame Number 3: 23 Page Faults
Frame Number 4: 18 Page Faults
Frame Number 5: 17 Page Faults
Frame Number 6: 12 Page Faults
Frame Number 7: 11 Page Faults
Both Algorithms have same minimum page fault with 11 Page Faults at Frame 7

 End of Simulation
]0;acarico@bglinux1:~/cs3080/vmem~/cs3080/vmem$ exit
exit

Script done on Mon Nov 22 17:48:37 2021
